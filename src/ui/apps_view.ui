<?xml version='1.0' encoding='UTF-8'?>
<interface>
  <!-- Main window -->
  <template class='AppsView' parent='GtkBox'>
    <property name='orientation'>GTK_ORIENTATION_VERTICAL</property>
    <child>
      <!-- HeaderBar -->
      <object class='AdwHeaderBar' id='header_bar'>
        <!-- New file button -->
        <child type='start'>
          <object class='GtkButton' id='new_file_button'>
            <property name='icon-name'>list-add-symbolic</property>
            <property name='tooltip-text' translatable='yes'>New app</property>
          </object>
        </child>
        <!-- Title (PinApp) -->
        <property name='title-widget'>
          <object class='AdwWindowTitle' id='title_widget'>
            <property name='title' translatable='yes'>PinApp</property>
          </object>
        </property>
        <!-- Menu button -->
        <child type='end'>
          <object class='GtkMenuButton' id='menu_button'>
            <property name='tooltip-text' translatable='yes'>Show menu</property>
            <property name='icon-name'>open-menu-symbolic</property>
            <property name='menu-model'>primary_menu</property>
            <property name='visible'>true</property>
          </object>
        </child>
        <!-- Search button -->
        <child type='end'>
          <object class='GtkToggleButton' id='search_button'>
            <property name='active' bind-source='search_bar' bind-property='search-mode-enabled' bind-flags='bidirectional'/>
            <property name='tooltip-text' translatable='yes'>Search</property>
            <property name='icon-name'>system-search-symbolic</property>
          </object>
        </child>
      </object>
    </child>
    <child>
      <object class='GtkBox'>
        <property name='hexpand'>True</property>
        <property name='vexpand'>True</property>
        <property name='orientation'>vertical</property>
        <!-- Search bar -->
        <child>
          <object class='GtkSearchBar' id='search_bar'>
            <child>
              <object class='GtkSearchEntry' id='search_entry'>
                <property name='placeholder-text' translatable='yes'>Search your apps</property>
              </object>
            </child>
          </object>
        </child>
        <child>
          <object class='GtkScrolledWindow'>
            <property name='hexpand'>True</property>
            <property name='vexpand'>True</property>
            <child>
              <object class='AdwClamp'>
                <property name='margin-top'>24</property>
                <property name='margin-bottom'>24</property>
                <property name='margin-start'>12</property>
                <property name='margin-end'>12</property>
                <child>
                  <object class='AdwPreferencesGroup'>
                    <child>
                      <object class='GtkBox' id='folder-chooser-box'>
                        <property name='homogeneous'>True</property>
                        <property name='margin_bottom'>12</property>
                        <style>
                          <class name='linked'/>
                        </style>
                        <child>
                          <object class='GtkToggleButton' id='user_button'>
                            <property name='label' translatable='yes'>User</property>
                            <property name='tooltip-text' translatable='yes'>User applications folder</property>
                            <property name='active'>true</property> <!-- This is because user group is active by default -->
                            <property name='active' bind-source='user_group' bind-property='visible' bind-flags='bidirectional'/>
                          </object>
                        </child>
                        <child>
                          <object class='GtkToggleButton' id='system_button'>
                            <property name='label' translatable='yes'>System</property>
                            <property name='tooltip-text' translatable='yes'>System applications folder</property>
                            <property name='active' bind-source='system_group' bind-property='visible' bind-flags='bidirectional'/>
                            <property name='group'>user_button</property>
                          </object>
                        </child>
                        <child>
                          <object class='GtkToggleButton' id='flatpak_button'>
                            <property name='label' translatable='yes'>Flatpak</property>
                            <property name='tooltip-text' translatable='yes'>Flatpak applications folder</property>
                            <property name='active' bind-source='flatpak_group' bind-property='visible' bind-flags='bidirectional'/>
                            <property name='group'>user_button</property>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class='AdwPreferencesGroup' id='user_group'>
                        <property name='visible'>false</property>
                      </object>
                    </child>
                    <child>
                      <object class='AdwPreferencesGroup' id='system_group'>
                        <property name='visible'>false</property>
                      </object>
                    </child>
                    <child>
                      <object class='AdwPreferencesGroup' id='flatpak_group'>
                        <property name='visible'>false</property>
                      </object>
                    </child>
                  </object>
                </child>
              </object>
            </child>
          </object>
        </child>
      </object>
    </child>
  </template>

  <!-- Primary menu model -->
  <menu id='primary_menu'>
    <section>
      <item>
        <attribute name='label' translatable='yes'>_Keyboard Shortcuts</attribute>
        <attribute name='action'>win.show-help-overlay</attribute>
      </item>
      <item>
        <attribute name='label' translatable='yes'>_About PinApp</attribute>
        <attribute name='action'>app.about</attribute>
      </item>
    </section>
  </menu>
</interface>